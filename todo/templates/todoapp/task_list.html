{% extends 'todoapp/base.html' %}

{% block title %}–ú–æ–∏ –∑–∞–¥–∞—á–∏{% endblock %}

{% block content %}

<h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>

<form method="get" class="mb-3">
    <input  type="text" name="q" class="form-control" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á..." value="{{ request.GET.q }}">
</form>

{% if tasks %}
    <div class="list-group">
        {% for task in tasks %}
            <div class="list-group-item">
                <h5>
                    {% if task.completed %}
                        <s>{{ task.title }}</s>
                    {% else %}
                        {{ task.title }}
                        {% if task.is_urgent %}
                        <span class="badge bg-warning text-dark ms-2">‚ö†Ô∏è –°–∫–æ—Ä–æ –¥–µ–¥–ª–∞–π–Ω</span>
                        {% endif %}
                    {% endif %}
                    {% if task.due_date %}
                        <small class="text-muted"> ‚Äî –¥–æ {{ task.due_date|date:"d.m.Y H:i" }}</small>
                    {% endif %}
                </h5>
                {% if task.image %}
                    <img src="{{ task.image.url }}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="img-thumbnail" style="max-width: 200px;">
                {% endif %}
                <p>{{ task.description }}</p>
                {% if task.deadline %}
                    <p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> {{ task.deadline|date:"d.m.Y H:i" }}</p>
                {% endif %}
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {% if task.completed %}‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ{% else %}‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ{% endif %}</p>

                <a href="{% url 'task_update' task.pk %}" class="btn btn-sm btn-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'task_delete' task.pk %}" class="btn btn-sm btn-danger delete">üóëÔ∏è</a>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É!</p>
{% endif %}

{% endblock %}
